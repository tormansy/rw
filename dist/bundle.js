(()=>{"use strict";const e=document.querySelector(".start_game"),t=document.getElementById("levels"),c=document.querySelector(".app"),s=document.querySelector(".game"),d=document.querySelector(".card_block"),l=document.querySelector(".button_restart"),a=document.querySelectorAll(".card"),n=document.querySelector(".box_level"),o=document.querySelector(".finish_block");let r=null,i=null,_=!1,u=0,m=!1;t.addEventListener("click",(function(e){let t=[...document.querySelectorAll(".level")].indexOf(e.target)+1;u=t})),o.classList.add("finish_block_hidden"),s.classList.add("game_hidden"),d.classList.add("card_block_hidden");const h=["card_a1","card_a2","card_a3","card_a4","card_k1","card_k2","card_k3","card_k4","card_q1","card_q2","card_q3","card_q4","card_j1","card_j2","card_j3","card_j4","card10_1","card10_2","card10_3","card10_4","card9_1","card9_2","card9_3","card9_4","card8_1","card8_2","card8_3","card8_4","card7_1","card7_2","card7_3","card7_4","card6_1","card6_2","card6_3","card6_4"];e.addEventListener("click",(()=>{0===u&&console.log("уровень не выбран"),1===u&&(C(),b(p(3)),S(),q()),2===u&&(C(),b(p(6)),S(),q()),3===u&&(C(),b(p(9)),S(),q())}));const L=document.querySelector(".timer_block");var v,f=0,k=0;function y(){++f>=60&&(f=0,++k>=60&&(k=0)),L.textContent=(k>9?k:"0"+k)+":"+(f>9?f:"0"+f),q()}function q(){v=setTimeout(y,1e3)}function g(){clearInterval(v),d.textContent="",L.textContent="00:00",f=0,k=0,r=null,i=null,_=!1,a.forEach((e=>{e.classList.remove("back")})),c.classList.remove("app_hidden"),s.classList.add("game_hidden"),d.classList.add("card_block_hidden"),s.classList.remove("opacity_finish"),d.classList.remove("opacity_finish"),o.classList.add("finish_block_hidden"),n.classList.remove("box_level_hidden")}function p(e){let t=[];for(let c=0;c<e;c++){let e=Math.floor(Math.random()*h.length),c=h[e];h.slice(e,1),t.push(c),t.push(c)}return t}function b(e){e.sort((()=>Math.random()-.5)),console.log(e);for(let t of e){let e=document.createElement("div");e.classList.add("card"),e.classList.add(t),e.id=t,d.appendChild(e),setTimeout((()=>{e.classList.add("back"),_=!0}),5e3)}}function S(){let e=[];const t=document.querySelectorAll(".card");t.forEach((c=>c.addEventListener("click",(()=>{!0!==_||c.classList.contains("sucsess")||(c.classList.remove("back"),null===r?r=c:c!==r&&(i=c),null!==r&&null!==i&&r!==i&&(r.id===i.id?(console.log("true"),r.classList.add("sucsess"),i.classList.add("sucsess"),e.push(r),e.push(i),t.length!==e.length&&(r=null,i=null)):(alert("Вы проиграли"),console.log("lose"),_=!1,m=!1,x()))),t.length===e.length&&(alert("Вы выиграли"),console.log("win"),_=!1,m=!0,x()),console.log(r,i)}))))}function x(){clearInterval(v),c.classList.remove("app_hidden"),o.classList.remove("finish_block_hidden"),s.classList.add("opacity_finish"),d.classList.add("opacity_finish");const e=document.querySelector(".title_finish"),t=document.querySelector(".title_icon");document.querySelector(".total_time").textContent=`${L.textContent}`;const l=document.querySelector(".button_restart2");!0===m?(e.textContent="Вы выиграли!",t.classList.remove("title_icon_lose"),t.classList.add("title_icon_win")):(e.textContent="Вы проиграли!",t.classList.remove("title_icon_win"),t.classList.add("title_icon_lose")),l.addEventListener("click",(()=>{g()}))}function C(){d.textContent="",c.classList.add("app_hidden"),n.classList.add("box_level_hidden"),s.classList.remove("game_hidden"),d.classList.remove("card_block_hidden")}l.addEventListener("click",(()=>{g()}))})();